!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).kurentoUtils=e()}}(function(){return function s(o,a,c){function d(t,e){if(!a[t]){if(!o[t]){var i="function"==typeof require&&require;if(!e&&i)return i(t,!0);if(u)return u(t,!0);var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}var r=a[t]={exports:{}};o[t][0].call(r.exports,function(e){var i=o[t][1][e];return d(i||e)},r,r.exports,s,o,a,c)}return a[t].exports}for(var u="function"==typeof require&&require,e=0;e<c.length;e++)d(c[e]);return d}({1:[function(e,i,t){var P=e("freeice"),n=e("inherits"),r=e("ua-parser-js"),j=e("uuid"),s=e("hark"),O=e("events").EventEmitter,U=e("merge").recursive.bind(void 0,!0),R=e("sdp-translator"),M=window.Logger||console;try{e("kurento-browser-extensions")}catch(e){"undefined"==typeof getScreenConstraints&&(z("screen sharing is not available"),getScreenConstraints=function(e,i){i(new Error("This library is not enabled for screen sharing"))})}var N={audio:!0,video:{width:320,framerate:15}},D=new r(window&&window.navigator?window.navigator.userAgent:""),B=D.getBrowser(),I=!1,o=!1;function z(e){o&&M.warn(e)}function F(e){o&&M.info(e)}function V(e){e&&M.error(e)}function a(e){e.stop&&e.stop()}function c(e){e.getTracks().forEach(a)}"Chrome"!==B.name&&"Chromium"!==B.name||(F(B.name+": using SDP PlanB"),I=!0);var G=function(e){return null==e?"":"type: "+e.type+"\r\n"+e.sdp};function W(t,n){var r=[];return t.addEventListener("signalingstatechange",function(){if("stable"===this.signalingState)for(;r.length;){var e=r.shift();this.addIceCandidate(e.candidate,e.callback,e.callback)}}),function(e,i){switch(i=i||n,t.signalingState){case"closed":i(new Error("PeerConnection object is closed"));break;case"stable":if(t.remoteDescription){t.addIceCandidate(e,i,i);break}default:r.push({candidate:e,callback:i})}}}function q(r,e,t){if(!(this instanceof q))return new q(r,e,t);q.super_.call(this),e instanceof Function&&(t=e,e=void 0),e=e||{},t=(t||V).bind(this);var i,s=this,n=e.localVideo,o=e.remoteVideo,a=e.videoStream,c=e.audioStream,d=e.mediaConstraints,u=(e.connectionConstraints,e.peerConnection),p=e.sendSource||"webcam",l=e.dataChannelConfig,f=e.dataChannels||!1,m=j.v4(),h=U({iceServers:P()},e.configuration),v=e.onicecandidate;v&&this.on("icecandidate",v);var g=e.oncandidategatheringdone;g&&this.on("candidategatheringdone",g);var w=e.simulcast,y=e.multistream,b=new R.Interop,k=[],x=!1;if(Object.defineProperties(this,{peerConnection:{get:function(){return u}},id:{value:e.id||m,writable:!1},remoteVideo:{get:function(){return o}},localVideo:{get:function(){return n}},dataChannel:{get:function(){return i}},currentFrame:{get:function(){if(o){if(o.readyState<o.HAVE_CURRENT_DATA)throw new Error("No video stream data available");var e=document.createElement("canvas");return e.width=o.videoWidth,e.height=o.videoHeight,e.getContext("2d").drawImage(o,0,0),e}}}}),!u&&(u=new RTCPeerConnection(h),f&&!i)){var E="WebRtcPeer-"+s.id,S=void 0;l&&(E=l.id||E,S=l.options),i=u.createDataChannel(E,S),l&&(i.onopen=l.onopen,i.onclose=l.onclose,i.onmessage=l.onmessage,i.onbufferedamountlow=l.onbufferedamountlow,i.onerror=l.onerror||V)}u.addEventListener("icecandidate",function(e){var i,t=e.candidate;O.listenerCount(s,"icecandidate")||O.listenerCount(s,"candidategatheringdone")?t?(i=y&&I?b.candidateToUnifiedPlan(t):t,s.emit("icecandidate",i),x=!1):x||(s.emit("candidategatheringdone"),x=!0):x||(k.push(t),t||(x=!0))}),u.ontrack=e.onaddstream,u.onnegotiationneeded=e.onnegotiationneeded,this.on("newListener",function(e,i){if("icecandidate"===e||"candidategatheringdone"===e)for(;k.length;){var t=k.shift();!t==("candidategatheringdone"===e)&&i(t)}});var A=W(u);function C(){if(o){var e=u.getRemoteStreams()[0];if("object"==typeof o.srcObject)o.srcObject=e||"";else{var i=window.URL||window.webkitURL;o.src=e?i.createObjectURL(e):""}o.pause(),o.load()}}function _(e){var i,t;return w&&("Chrome"===B.name||"Chromium"===B.name?(F("Adding multicast info"),e=new RTCSessionDescription({type:e.type,sdp:(i=e.sdp,t=i.indexOf("a=ssrc-group:FID"),(0<t?i.slice(0,t):i)+function(e){var i=e.getVideoTracks();if(!i.length)return z("No video tracks available in the video stream"),"";var t=["a=x-google-flag:conference","a=ssrc-group:SIM 1 2 3","a=ssrc:1 cname:localVideo","a=ssrc:1 msid:"+e.id+" "+i[0].id,"a=ssrc:1 mslabel:"+e.id,"a=ssrc:1 label:"+i[0].id,"a=ssrc:2 cname:localVideo","a=ssrc:2 msid:"+e.id+" "+i[0].id,"a=ssrc:2 mslabel:"+e.id,"a=ssrc:2 label:"+i[0].id,"a=ssrc:3 cname:localVideo","a=ssrc:3 msid:"+e.id+" "+i[0].id,"a=ssrc:3 mslabel:"+e.id,"a=ssrc:3 label:"+i[0].id];return t.push(""),t.join("\n")}(a))})):z("Simulcast is only available in Chrome browser.")),e}function L(){"closed"===u.signalingState&&t('The peer connection object is in "closed" state. This is most likely due to an invocation of the dispose method before accepting in the dialogue'),a&&n&&s.showLocalVideo(),a&&u.addStream(a),c&&u.addStream(c);var e=D.getBrowser();"sendonly"!==r||"Chrome"!==e.name&&"Chromium"!==e.name||39!==e.major||(r="sendrecv"),t()}if(this.addIceCandidate=function(e,i){var t;t=y&&I?b.candidateToPlanB(e):new RTCIceCandidate(e),M.debug("Remote ICE candidate received",e),i=(i||V).bind(this),A(t,i)},this.generateOffer=function(i){i=i.bind(this);var e=!0,t=!0;d&&(e="boolean"!=typeof d.audio||d.audio,t="boolean"!=typeof d.video||d.video);var n={offerToReceiveAudio:"sendonly"!==r&&e,offerToReceiveVideo:"sendonly"!==r&&t};F("constraints: "+JSON.stringify(n)),u.createOffer(n).then(function(e){return F("Created SDP offer"),e=_(e),u.setLocalDescription(e)}).then(function(){var e=u.localDescription;F("Local description set",e.sdp),y&&I&&(e=b.toUnifiedPlan(e),F("offer::origPlanB->UnifiedPlan",G(e))),i(null,e.sdp,s.processAnswer.bind(s))}).catch(i)},this.getLocalSessionDescriptor=function(){return u.localDescription},this.getRemoteSessionDescriptor=function(){return u.remoteDescription},this.showLocalVideo=function(){n.src=URL.createObjectURL(a),n.muted=!0},this.send=function(e){i&&"open"===i.readyState?i.send(e):z("Trying to send data over a non-existing or closed data channel")},this.processAnswer=function(e,i){i=(i||V).bind(this);var t=new RTCSessionDescription({type:"answer",sdp:e});if(y&&I){var n=b.toPlanB(t);F("asnwer::planB",G(n)),t=n}if(F("SDP answer received, setting remote description"),"closed"===u.signalingState)return i("PeerConnection is closed");u.setRemoteDescription(t,function(){C(),i()},i)},this.processOffer=function(e,i){i=i.bind(this);var t=new RTCSessionDescription({type:"offer",sdp:e});if(y&&I){var n=b.toPlanB(t);F("offer::planB",G(n)),t=n}if(F("SDP offer received, setting remote description"),"closed"===u.signalingState)return i("PeerConnection is closed");u.setRemoteDescription(t).then(function(){return C()}).then(function(){return u.createAnswer()}).then(function(e){return e=_(e),F("Created SDP answer"),u.setLocalDescription(e)}).then(function(){var e=u.localDescription;y&&I&&(e=b.toUnifiedPlan(e),F("answer::origPlanB->UnifiedPlan",G(e))),F("Local description set",e.sdp),i(null,e.sdp)}).catch(i)},"recvonly"===r||a||c)setTimeout(L,0);else{function T(e){void 0===e&&(e=N),navigator.mediaDevices.getUserMedia(e).then(function(e){a=e,L()}).catch(t)}"webcam"===p?T(d):getScreenConstraints(p,function(e,i){if(e)return t(e);constraints=[d],constraints.unshift(i),T(U.apply(void 0,constraints))},m)}this.on("_dispose",function(){n&&(n.pause(),n.src="",n.load(),n.muted=!1),o&&(o.pause(),o.src="",o.load()),s.removeAllListeners(),void 0!==window.cancelChooseDesktopMedia&&window.cancelChooseDesktopMedia(m)})}function d(e){var o="get"+e+"Tracks";return{enumerable:!0,get:function(){if(this.peerConnection){var e=this.peerConnection.getLocalStreams();if(e.length){for(var i,t=0;i=e[t];t++)for(var n,r=i[o](),s=0;n=r[s];s++)if(!n.enabled)return!1;return!0}}},set:function(i){function t(e){e.enabled=i}this.peerConnection.getLocalStreams().forEach(function(e){e[o]().forEach(t)})}}}function u(e,i){if(!(this instanceof u))return new u(e,i);u.super_.call(this,"recvonly",e,i)}function p(e,i){if(!(this instanceof p))return new p(e,i);p.super_.call(this,"sendonly",e,i)}function l(e,i){if(!(this instanceof l))return new l(e,i);l.super_.call(this,"sendrecv",e,i)}n(q,O),Object.defineProperties(q.prototype,{enabled:{enumerable:!0,get:function(){return this.audioEnabled&&this.videoEnabled},set:function(e){this.audioEnabled=this.videoEnabled=e}},audioEnabled:d("Audio"),videoEnabled:d("Video")}),q.prototype.getLocalStream=function(e){if(this.peerConnection)return this.peerConnection.getLocalStreams()[e||0]},q.prototype.getRemoteStream=function(e){if(this.peerConnection)return this.peerConnection.getRemoteStreams()[e||0]},q.prototype.dispose=function(){F("Disposing WebRtcPeer");var e=this.peerConnection,i=this.dataChannel;try{if(i){if("closed"===i.signalingState)return;i.close()}if(e){if("closed"===e.signalingState)return;e.getLocalStreams().forEach(c),e.close()}}catch(e){z("Exception disposing webrtc peer "+e)}this.emit("_dispose")},n(u,q),n(p,q),n(l,q),t.bufferizeCandidates=W,t.WebRtcPeerRecvonly=u,t.WebRtcPeerSendonly=p,t.WebRtcPeerSendrecv=l,t.hark=function(e,i){return s(e,i)}},{events:4,freeice:5,hark:8,inherits:9,"kurento-browser-extensions":10,merge:11,"sdp-translator":18,"ua-parser-js":21,uuid:23}],2:[function(e,i,t){window.addEventListener&&(i.exports=e("./index"))},{"./index":3}],3:[function(e,i,t){var n=e("./WebRtcPeer");t.WebRtcPeer=n},{"./WebRtcPeer":1}],4:[function(e,i,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function c(e){return"function"==typeof e}function d(e){return"object"==typeof e&&null!==e}function u(e){return void 0===e}((i.exports=n).EventEmitter=n).prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var i,t,n,r,s,o;if(this._events||(this._events={}),"error"===e&&(!this._events.error||d(this._events.error)&&!this._events.error.length)){if((i=arguments[1])instanceof Error)throw i;var a=new Error('Uncaught, unspecified "error" event. ('+i+")");throw a.context=i,a}if(u(t=this._events[e]))return!1;if(c(t))switch(arguments.length){case 1:t.call(this);break;case 2:t.call(this,arguments[1]);break;case 3:t.call(this,arguments[1],arguments[2]);break;default:r=Array.prototype.slice.call(arguments,1),t.apply(this,r)}else if(d(t))for(r=Array.prototype.slice.call(arguments,1),n=(o=t.slice()).length,s=0;s<n;s++)o[s].apply(this,r);return!0},n.prototype.on=n.prototype.addListener=function(e,i){var t;if(!c(i))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,c(i.listener)?i.listener:i),this._events[e]?d(this._events[e])?this._events[e].push(i):this._events[e]=[this._events[e],i]:this._events[e]=i,d(this._events[e])&&!this._events[e].warned&&(t=u(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&0<t&&this._events[e].length>t&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},n.prototype.once=function(e,i){if(!c(i))throw TypeError("listener must be a function");var t=!1;function n(){this.removeListener(e,n),t||(t=!0,i.apply(this,arguments))}return n.listener=i,this.on(e,n),this},n.prototype.removeListener=function(e,i){var t,n,r,s;if(!c(i))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(r=(t=this._events[e]).length,n=-1,t===i||c(t.listener)&&t.listener===i)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,i);else if(d(t)){for(s=r;0<s--;)if(t[s]===i||t[s].listener&&t[s].listener===i){n=s;break}if(n<0)return this;1===t.length?(t.length=0,delete this._events[e]):t.splice(n,1),this._events.removeListener&&this.emit("removeListener",e,i)}return this},n.prototype.removeAllListeners=function(e){var i,t;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(i in this._events)"removeListener"!==i&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events={},this}if(c(t=this._events[e]))this.removeListener(e,t);else if(t)for(;t.length;)this.removeListener(e,t[t.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){return this._events&&this._events[e]?c(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var i=this._events[e];if(c(i))return 1;if(i)return i.length}return 0},n.listenerCount=function(e,i){return e.listenerCount(i)}},{}],5:[function(o,e,i){"use strict";var a=o("normalice");e.exports=function(e){var i,s={stun:(e||{}).stun||o("./stun.json"),turn:(e||{}).turn||o("./turn.json")},t=(e||{}).stunCount||2,n=(e||{}).turnCount||0;function r(i,e){for(var t,n=[],r=[].concat(s[i]);r.length&&n.length<e;)t=Math.random()*r.length|0,n=n.concat(r.splice(t,1));return n.map(function(e){return"string"==typeof e||e instanceof String?a(i+":"+e):e})}return i=[].concat(r("stun",t)),n&&(i=i.concat(r("turn",n))),i}},{"./stun.json":6,"./turn.json":7,normalice:12}],6:[function(e,i,t){i.exports=["stun.l.google.com:19302","stun1.l.google.com:19302","stun2.l.google.com:19302","stun3.l.google.com:19302","stun4.l.google.com:19302","stun.ekiga.net","stun.ideasip.com","stun.schlund.de","stun.stunprotocol.org:3478","stun.voiparound.com","stun.voipbuster.com","stun.voipstunt.com","stun.voxgratia.org","stun.services.mozilla.com"]},{}],7:[function(e,i,t){i.exports=[]},{}],8:[function(e,i,t){var m=e("wildemitter");var h=window.AudioContext||window.webkitAudioContext,v=null;i.exports=function(e,i){var n=new m;if(!h)return n;var t,r,s,o=(i=i||{}).smoothing||.1,a=i.interval||50,c=i.threshold,d=i.play,u=i.history||10,p=!0;v||(v=new h),(s=v.createAnalyser()).fftSize=512,s.smoothingTimeConstant=o,r=new Float32Array(s.fftSize),e.jquery&&(e=e[0]),c=(e instanceof HTMLAudioElement||e instanceof HTMLVideoElement?(t=v.createMediaElementSource(e),void 0===d&&(d=!0)):t=v.createMediaStreamSource(e),c||-50),t.connect(s),d&&s.connect(v.destination),n.speaking=!1,n.setThreshold=function(e){c=e},n.setInterval=function(e){a=e},n.stop=function(){p=!1,n.emit("volume_change",-100,c),n.speaking&&(n.speaking=!1,n.emit("stopped_speaking"))},n.speakingHistory=[];for(var l=0;l<u;l++)n.speakingHistory.push(0);var f=function(){setTimeout(function(){if(p){var e=function(e,i){var t=-1/0;e.getFloatFrequencyData(i);for(var n=4,r=i.length;n<r;n++)i[n]>t&&i[n]<0&&(t=i[n]);return t}(s,r);n.emit("volume_change",e,c);var i=0;if(c<e&&!n.speaking){for(var t=n.speakingHistory.length-3;t<n.speakingHistory.length;t++)i+=n.speakingHistory[t];2<=i&&(n.speaking=!0,n.emit("speaking"))}else if(e<c&&n.speaking){for(t=0;t<n.speakingHistory.length;t++)i+=n.speakingHistory[t];0==i&&(n.speaking=!1,n.emit("stopped_speaking"))}n.speakingHistory.shift(),n.speakingHistory.push(0+(c<e)),f()}},a)};return f(),n}},{wildemitter:24}],9:[function(e,i,t){"function"==typeof Object.create?i.exports=function(e,i){e.super_=i,e.prototype=Object.create(i.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:i.exports=function(e,i){e.super_=i;var t=function(){};t.prototype=i.prototype,e.prototype=new t,e.prototype.constructor=e}},{}],10:[function(e,i,t){},{}],11:[function(e,t,i){!function(e){var d=function(e){return i(!0===e,!1,arguments)};function u(e,i){if("object"!==p(e))return i;for(var t in i)"object"===p(e[t])&&"object"===p(i[t])?e[t]=u(e[t],i[t]):e[t]=i[t];return e}function i(e,i,t){var n=t[0],r=t.length;(e||"object"!==p(n))&&(n={});for(var s=0;s<r;++s){var o=t[s];if("object"===p(o))for(var a in o){var c=e?d.clone(o[a]):o[a];n[a]=i?u(n[a],c):c}}return n}function p(e){return{}.toString.call(e).slice(8,-1).toLowerCase()}d.recursive=function(e){return i(!0===e,!0,arguments)},d.clone=function(e){var i,t,n=e,r=p(e);if("array"===r)for(n=[],t=e.length,i=0;i<t;++i)n[i]=d.clone(e[i]);else if("object"===r)for(i in n={},e)n[i]=d.clone(e[i]);return n},e?t.exports=d:window.merge=d}("object"==typeof t&&t&&"object"==typeof t.exports&&t.exports)},{}],12:[function(e,i,t){var s=["stun:","turn:"];i.exports=function(e){var i,t,n=(e||{}).url||e,r={};return"string"==typeof n||n instanceof String?(n=n.trim(),(i=s[s.indexOf(n.slice(0,5))])?(t=(n=n.slice(5)).split("@"),r.username=e.username,r.credential=e.credential,1<t.length&&(n=t[1],t=t[0].split(":"),r.username=t[0],r.credential=(e||{}).credential||t[1]||""),r.url=i+n,r.urls=[r.url],r):e):e}},{}],13:[function(e,i,t){var n=i.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w\/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(e){return e.encoding?"rtpmap:%d %s/%s/%s":e.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(e){return null!=e.address?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%d trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(e){return null!=e.subtype?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:([\w_\/]*) (\S*)(?: (\S*))?/,names:["value","uri","config"],format:function(e){return null!=e.config?"extmap:%s %s %s":"extmap:%s %s"}},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(e){return null!=e.sessionConfig?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation"],format:function(e){var i="candidate:%s %d %s %d %s %d typ %s";return i+=null!=e.raddr?" raddr %s rport %d":"%v%v",i+=null!=e.tcptype?" tcptype %s":"%v",null!=e.generation&&(i+=" generation %d"),i}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_]*):(.*)/,names:["id","attribute","value"],format:"ssrc:%d %s:%s"},{push:"ssrcGroups",reg:/^ssrc-group:(\w*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{push:"invalid",names:["value"]}]};Object.keys(n).forEach(function(e){n[e].forEach(function(e){e.reg||(e.reg=/(.*)/),e.format||(e.format="%s")})})},{}],14:[function(e,i,t){var n=e("./parser"),r=e("./writer");t.write=r,t.parse=n.parse,t.parseFmtpConfig=n.parseFmtpConfig,t.parsePayloads=n.parsePayloads,t.parseRemoteCandidates=n.parseRemoteCandidates},{"./parser":15,"./writer":16}],15:[function(e,i,t){var s=function(e){return String(Number(e))===e?Number(e):e},a=function(e,i,t){var n=e.name&&e.names;e.push&&!i[e.push]?i[e.push]=[]:n&&!i[e.name]&&(i[e.name]={});var r=e.push?{}:n?i[e.name]:i;!function(e,i,t,n){if(n&&!t)i[n]=s(e[1]);else for(var r=0;r<t.length;r+=1)null!=e[r+1]&&(i[t[r]]=s(e[r+1]))}(t.match(e.reg),r,e.names,e.name),e.push&&i[e.push].push(r)},c=e("./grammar"),n=RegExp.prototype.test.bind(/^([a-z])=(.*)/);t.parse=function(e){var i={},s=[],o=i;return e.split(/(\r\n|\r|\n)/).filter(n).forEach(function(e){var i=e[0],t=e.slice(2);"m"===i&&(s.push({rtp:[],fmtp:[]}),o=s[s.length-1]);for(var n=0;n<(c[i]||[]).length;n+=1){var r=c[i][n];if(r.reg.test(t))return a(r,o,t)}}),i.media=s,i};var r=function(e,i){var t=i.split("=");return 2===t.length&&(e[t[0]]=s(t[1])),e};t.parseFmtpConfig=function(e){return e.split(/\;\s?/).reduce(r,{})},t.parsePayloads=function(e){return e.split(" ").map(Number)},t.parseRemoteCandidates=function(e){for(var i=[],t=e.split(" ").map(s),n=0;n<t.length;n+=3)i.push({component:t[n],ip:t[n+1],port:t[n+2]});return i}},{"./grammar":13}],16:[function(e,i,t){var s=e("./grammar"),o=/%[sdv%]/g,a=function(e,i,t){var n=[e+"="+(i.format instanceof Function?i.format(i.push?t:t[i.name]):i.format)];if(i.names)for(var r=0;r<i.names.length;r+=1){var s=i.names[r];i.name?n.push(t[i.name][s]):n.push(t[i.names[r]])}else n.push(t[i.name]);return function(e){var t=1,n=arguments,r=n.length;return e.replace(o,function(e){if(r<=t)return e;var i=n[t];switch(t+=1,e){case"%%":return"%";case"%s":return String(i);case"%d":return Number(i);case"%v":return""}})}.apply(null,n)},c=["v","o","s","i","u","e","p","c","b","t","r","z","a"],d=["i","c","b","a"];i.exports=function(e,i){i=i||{},null==e.version&&(e.version=0),null==e.name&&(e.name=" "),e.media.forEach(function(e){null==e.payloads&&(e.payloads="")});var t=i.outerOrder||c,n=i.innerOrder||d,r=[];return t.forEach(function(t){s[t].forEach(function(i){i.name in e&&null!=e[i.name]?r.push(a(t,i,e)):i.push in e&&null!=e[i.push]&&e[i.push].forEach(function(e){r.push(a(t,i,e))})})}),e.media.forEach(function(e){r.push(a("m",s.m[0],e)),n.forEach(function(t){s[t].forEach(function(i){i.name in e&&null!=e[i.name]?r.push(a(t,i,e)):i.push in e&&null!=e[i.push]&&e[i.push].forEach(function(e){r.push(a(t,i,e))})})})}),r.join("\r\n")+"\r\n"}},{"./grammar":13}],17:[function(e,i,t){i.exports=function e(i){if(!i)return!1;if(this.length!=i.length)return!1;for(var t=0,n=this.length;t<n;t++)if(this[t]instanceof Array&&i[t]instanceof Array){if(!e.apply(this[t],[i[t]]))return!1}else if(this[t]!=i[t])return!1;return!0}},{}],18:[function(e,i,t){t.Interop=e("./interop")},{"./interop":19}],19:[function(e,i,t){"use strict";var E=e("./transform"),S=e("./array-equals");function n(){this.cache={mlB2UMap:{},mlU2BMap:{}}}(i.exports=n).prototype.candidateToUnifiedPlan=function(e){var i=new RTCIceCandidate(e);return i.sdpMLineIndex=this.cache.mlB2UMap[i.sdpMLineIndex],i},n.prototype.candidateToPlanB=function(e){var i=new RTCIceCandidate(e);if(0===i.sdpMid.indexOf("audio"))i.sdpMid="audio";else{if(0!==i.sdpMid.indexOf("video"))throw new Error("candidate with "+i.sdpMid+" not allowed");i.sdpMid="video"}return i.sdpMLineIndex=this.cache.mlU2BMap[i.sdpMLineIndex],i},n.prototype.getFirstSendingIndexFromAnswer=function(e){if(!this.cache.answer)return null;var i=E.parse(this.cache.answer);if(i&&i.media&&Array.isArray(i.media))for(var t=0;t<i.media.length;t++)if(i.media[t].type==e&&(!i.media[t].direction||"sendrecv"===i.media[t].direction||"sendonly"===i.media[t].direction))return t;return null},n.prototype.toPlanB=function(e){var t=this;if("object"!=typeof e||null===e||"string"!=typeof e.sdp)return console.warn("An empty description was passed as an argument."),e;var n=E.parse(e.sdp);if(void 0===n.media||!Array.isArray(n.media)||0===n.media.length)return console.warn("The description has no media."),e;if(n.media.length<=3&&n.media.every(function(e){return-1!==["video","audio","data"].indexOf(e.mid)}))return console.warn("This description does not look like Unified Plan."),e;for(var i=e.sdp,r=!1,s=0;s<n.media.length;s++){n.media[s].rtp.forEach(function(e){if("NULL"===e.codec){r=!0;var i=E.parse(t.cache.offer);e.codec=i.media[s].rtp[0].codec}})}r&&(i=E.write(n)),this.cache[e.type]=i;var o=n.media;n.media=[];var a={},c=[];o.forEach(function(e){if(("string"!=typeof e.rtcpMux||"rtcp-mux"!==e.rtcpMux)&&"inactive"!==e.direction)throw new Error("Cannot convert to Plan B because m-lines without the rtcp-mux attribute were found.");if(void 0!==a[e.type]&&"inactive"!==a[e.type].direction||(a[e.type]=e),e.protocol!=a[e.type].protocol)throw new Error("Cannot convert to Plan B because m-lines have different protocols and this library does not have support for that");if(e.payloads!=a[e.type].payloads)throw new Error("Cannot convert to Plan B because m-lines have different payloads and this library does not have support for that")}),o.forEach(function(i){if("application"===i.type)return n.media.push(i),void c.push(i.mid);"object"==typeof i.sources&&Object.keys(i.sources).forEach(function(e){"object"!=typeof a[i.type].sources&&(a[i.type].sources={}),a[i.type].sources[e]=i.sources[e],void 0!==i.msid&&(a[i.type].sources[e].msid=i.msid)}),void 0!==i.ssrcGroups&&Array.isArray(i.ssrcGroups)&&(void 0!==a[i.type].ssrcGroups&&Array.isArray(a[i.type].ssrcGroups)||(a[i.type].ssrcGroups=[]),a[i.type].ssrcGroups=a[i.type].ssrcGroups.concat(i.ssrcGroups)),a[i.type]===i&&(i.mid=i.type,delete i.bundleOnly,delete i.msid,i.type==o[0].type?(c.unshift(i.type),n.media.unshift(i)):(c.push(i.type),n.media.push(i)))}),void 0!==n.groups&&n.groups.some(function(e){if("BUNDLE"===e.type)return e.mids=c.join(" "),!0}),n.msidSemantic={semantic:"WMS",token:"*"};var d=E.write(n);return new RTCSessionDescription({type:e.type,sdp:d})},n.prototype.toUnifiedPlan=function(a){var c=this;if("object"!=typeof a||null===a||"string"!=typeof a.sdp)return console.warn("An empty description was passed as an argument."),a;var r=E.parse(a.sdp);if(void 0===r.media||!Array.isArray(r.media)||0===r.media.length)return console.warn("The description has no media."),a;if(3<r.media.length||!r.media.every(function(e){return-1!==["video","audio","data"].indexOf(e.mid)}))return console.warn("This description does not look like Plan B."),a;var n=[];r.media.forEach(function(e){n.push(e.mid)});var e,d,i=!1;if(void 0!==r.groups&&Array.isArray(r.groups)&&(i=r.groups.every(function(e){return"BUNDLE"!==e.type||S.apply(e.mids.sort(),[n.sort()])})),!i){var t=!1;if(r.media.forEach(function(e){"inactive"!==e.direction&&(t=!0)}),t)throw new Error("Cannot convert to Unified Plan because m-lines that are not bundled were found.")}if("answer"===a.type)e="offer";else{if("offer"!==a.type)throw new Error("Type '"+a.type+"' not supported.");e="answer"}void 0!==this.cache[e]&&(d=E.parse(this.cache[e]));var u,p,l,f,m={audio:{},video:{}},h={},v=0,g=0,w={},y={},b={},k={};if(r.media.forEach(function(e){if(("string"!=typeof e.rtcpMux||"rtcp-mux"!==e.rtcpMux)&&"inactive"!==e.direction)throw new Error("Cannot convert to Unified Plan because m-lines without the rtcp-mux attribute were found.");if("application"!==e.type){var i=e.sources,t=e.ssrcGroups,r=e.port;if(void 0!==e.candidates&&(u=void 0!==u?u.concat(e.candidates):e.candidates),void 0!==p&&void 0!==e.iceUfrag&&p!=e.iceUfrag)throw new Error("Only BUNDLE supported, iceUfrag must be the same for all m-lines.\n\tLast iceUfrag: "+p+"\n\tNew iceUfrag: "+e.iceUfrag);if(void 0!==e.iceUfrag&&(p=e.iceUfrag),void 0!==l&&void 0!==e.icePwd&&l!=e.icePwd)throw new Error("Only BUNDLE supported, icePwd must be the same for all m-lines.\n\tLast icePwd: "+l+"\n\tNew icePwd: "+e.icePwd);if(void 0!==e.icePwd&&(l=e.icePwd),void 0!==f&&void 0!==e.fingerprint&&(f.type!=e.fingerprint.type||f.hash!=e.fingerprint.hash))throw new Error("Only BUNDLE supported, fingerprint must be the same for all m-lines.\n\tLast fingerprint: "+JSON.stringify(f)+"\n\tNew fingerprint: "+JSON.stringify(e.fingerprint));void 0!==e.fingerprint&&(f=e.fingerprint),y[e.type]=e.payloads,b[e.type]=e.rtcpFb,k[e.type]=e.rtp;var s={};void 0!==t&&Array.isArray(t)&&t.forEach(function(i){void 0!==i.ssrcs&&Array.isArray(i.ssrcs)&&i.ssrcs.forEach(function(e){void 0===s[e]&&(s[e]=[]),s[e].push(i)})});var o={};if("object"==typeof i)delete e.sources,delete e.ssrcGroups,delete e.candidates,delete e.iceUfrag,delete e.icePwd,delete e.fingerprint,delete e.port,delete e.mid,Object.keys(i).forEach(function(t){var n;"offer"!==a.type||i[t].msid?(void 0!==s[t]&&Array.isArray(s[t])&&s[t].some(function(e){return e.ssrcs.some(function(e){if("object"==typeof o[e])return n=o[e],!0})}),"object"==typeof n?(n.sources[t]=i[t],delete i[t].msid):(n=Object.create(e),o[t]=n,void 0!==i[t].msid&&(n.msid=i[t].msid,delete i[t].msid),n.sources={},n.sources[t]=i[t],n.ssrcGroups=s[t],void 0!==d&&void 0!==d.media&&Array.isArray(d.media)&&d.media.forEach(function(i){"object"==typeof i.sources&&Object.keys(i.sources).forEach(function(e){e===t&&(n.mid=i.mid)})}),void 0===n.mid&&(n.mid=[e.type,"-",t].join("")),n.candidates=u,n.iceUfrag=p,n.icePwd=l,n.fingerprint=f,n.port=r,h[n.mid]=n,w[g]=n.sources,c.cache.mlU2BMap[g]=v,void 0===c.cache.mlB2UMap[v]&&(c.cache.mlB2UMap[v]=g),g++)):m[e.type][t]=i[t]});else{var n=e;n.candidates=u,n.iceUfrag=p,n.icePwd=l,n.fingerprint=f,n.port=r,h[n.mid]=n,c.cache.mlU2BMap[g]=v,void 0===c.cache.mlB2UMap[v]&&(c.cache.mlB2UMap[v]=g)}v++}else h[e.mid]=e}),r.media=[],n=[],"answer"===a.type)for(var s=0;s<d.media.length;s++){var o=d.media[s];delete o.msid,delete o.sources,delete o.ssrcGroups,void 0===w[s]?o.direction&&"sendrecv"!==o.direction?"sendonly"===o.direction&&(o.direction="inactive"):o.direction="recvonly":o.direction&&"sendrecv"!==o.direction?"recvonly"===o.direction&&(o.direction="sendonly"):o.direction="sendrecv",o.sources=w[s],o.candidates=u,o.iceUfrag=p,o.icePwd=l,o.fingerprint=f,o.rtp=k[o.type],o.payloads=y[o.type],o.rtcpFb=b[o.type],r.media.push(o),"string"==typeof o.mid&&n.push(o.mid)}else void 0!==d&&void 0!==d.media&&Array.isArray(d.media)&&d.media.forEach(function(e){var i;n.push(e.mid),void 0!==h[e.mid]?r.media.push(h[e.mid]):(delete e.msid,delete e.sources,delete e.ssrcGroups,e.direction&&"sendrecv"!==e.direction||(e.direction="sendonly"),e.direction&&"recvonly"!==e.direction||(e.direction="inactive"),void 0!==(i=e).setup&&("active"===i.setup?i.setup="passive":"passive"===i.setup&&(i.setup="active")),r.media.push(e))}),Object.keys(h).forEach(function(t){if(-1===n.indexOf(t))if(n.push(t),"recvonly"===h[t].direction){var e=!1;r.media.some(function(i){if(("sendrecv"===i.direction||"sendonly"===i.direction)&&i.type===h[t].type)return Object.keys(h[t].sources).forEach(function(e){i.sources[e]=h[t].sources[e]}),e=!0}),e||r.media.push(h[t])}else r.media.push(h[t])});["audio","video"].forEach(function(i){if(r&&r.media&&Array.isArray(r.media)){var e=null;if(0<Object.keys(m[i]).length&&null===(e=c.getFirstSendingIndexFromAnswer(i)))for(var t=0;t<r.media.length;t++)if(r.media[t].type===i){e=t;break}if(e&&r.media.length>e){var n=r.media[e];Object.keys(m[i]).forEach(function(e){n.sources&&n.sources[e]&&console.warn("Replacing an existing SSRC."),n.sources||(n.sources={}),n.sources[e]=m[i][e]})}}}),void 0!==r.groups&&r.groups.some(function(e){if("BUNDLE"===e.type)return e.mids=n.join(" "),!0}),r.msidSemantic={semantic:"WMS",token:"*"};var x=E.write(r);return this.cache[a.type]=x,new RTCSessionDescription({type:a.type,sdp:x})}},{"./array-equals":17,"./transform":20}],20:[function(e,i,t){var n=e("sdp-transform");t.write=function(e,i){return void 0!==e&&void 0!==e.media&&Array.isArray(e.media)&&e.media.forEach(function(n){void 0!==n.sources&&0!==Object.keys(n.sources).length&&(n.ssrcs=[],Object.keys(n.sources).forEach(function(i){var t=n.sources[i];Object.keys(t).forEach(function(e){n.ssrcs.push({id:i,attribute:e,value:t[e]})})}),delete n.sources),void 0!==n.ssrcGroups&&Array.isArray(n.ssrcGroups)&&n.ssrcGroups.forEach(function(e){void 0!==e.ssrcs&&Array.isArray(e.ssrcs)&&(e.ssrcs=e.ssrcs.join(" "))})}),void 0!==e&&void 0!==e.groups&&Array.isArray(e.groups)&&e.groups.forEach(function(e){void 0!==e.mids&&Array.isArray(e.mids)&&(e.mids=e.mids.join(" "))}),n.write(e,i)},t.parse=function(e){var i=n.parse(e);return void 0!==i&&void 0!==i.media&&Array.isArray(i.media)&&i.media.forEach(function(i){void 0!==i.ssrcs&&Array.isArray(i.ssrcs)&&(i.sources={},i.ssrcs.forEach(function(e){i.sources[e.id]||(i.sources[e.id]={}),i.sources[e.id][e.attribute]=e.value}),delete i.ssrcs),void 0!==i.ssrcGroups&&Array.isArray(i.ssrcGroups)&&i.ssrcGroups.forEach(function(e){"string"==typeof e.ssrcs&&(e.ssrcs=e.ssrcs.split(" "))})}),void 0!==i&&void 0!==i.groups&&Array.isArray(i.groups)&&i.groups.forEach(function(e){"string"==typeof e.mids&&(e.mids=e.mids.split(" "))}),i}},{"sdp-transform":14}],21:[function(e,E,S){!function(r,p){"use strict";var l="function",f="undefined",m="object",e="model",i="name",t="type",n="vendor",s="version",o="architecture",a="console",c="mobile",d="tablet",u="smarttv",h="wearable",v={extend:function(e,i){var t={};for(var n in e)i[n]&&i[n].length%2==0?t[n]=i[n].concat(e[n]):t[n]=e[n];return t},has:function(e,i){return"string"==typeof e&&-1!==i.toLowerCase().indexOf(e.toLowerCase())},lowerize:function(e){return e.toLowerCase()},major:function(e){return"string"==typeof e?e.replace(/[^\d\.]/g,"").split(".")[0]:p},trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},g={rgx:function(){for(var e,i,t,n,r,s,o,a=0,c=arguments;a<c.length&&!s;){var d=c[a],u=c[a+1];if(typeof e===f)for(n in e={},u)u.hasOwnProperty(n)&&(typeof(r=u[n])===m?e[r[0]]=p:e[r]=p);for(i=t=0;i<d.length&&!s;)if(s=d[i++].exec(this.getUA()))for(n=0;n<u.length;n++)o=s[++t],typeof(r=u[n])===m&&0<r.length?2==r.length?typeof r[1]==l?e[r[0]]=r[1].call(this,o):e[r[0]]=r[1]:3==r.length?typeof r[1]!==l||r[1].exec&&r[1].test?e[r[0]]=o?o.replace(r[1],r[2]):p:e[r[0]]=o?r[1].call(this,o,r[2]):p:4==r.length&&(e[r[0]]=o?r[3].call(this,o.replace(r[1],r[2])):p):e[r]=o||p;a+=2}return e},str:function(e,i){for(var t in i)if(typeof i[t]===m&&0<i[t].length){for(var n=0;n<i[t].length;n++)if(v.has(i[t][n],e))return"?"===t?p:t}else if(v.has(i[t],e))return"?"===t?p:t;return e}},w={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},y={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[i,s],[/(opios)[\/\s]+([\w\.]+)/i],[[i,"Opera Mini"],s],[/\s(opr)\/([\w\.]+)/i],[[i,"Opera"],s],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs)\/([\w\.-]+)/i],[i,s],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[i,"IE"],s],[/(edge)\/((\d+)?[\w\.]+)/i],[i,s],[/(yabrowser)\/([\w\.]+)/i],[[i,"Yandex"],s],[/(comodo_dragon)\/([\w\.]+)/i],[[i,/_/g," "],s],[/(micromessenger)\/([\w\.]+)/i],[[i,"WeChat"],s],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[s,[i,"MIUI Browser"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[i,/(.+)/,"$1 WebView"],s],[/android.+samsungbrowser\/([\w\.]+)/i,/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[s,[i,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i,/(qqbrowser)[\/\s]?([\w\.]+)/i],[i,s],[/(uc\s?browser)[\/\s]?([\w\.]+)/i,/ucweb.+(ucbrowser)[\/\s]?([\w\.]+)/i,/juc.+(ucweb)[\/\s]?([\w\.]+)/i],[[i,"UCBrowser"],s],[/(dolfin)\/([\w\.]+)/i],[[i,"Dolphin"],s],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[i,"Chrome"],s],[/;fbav\/([\w\.]+);/i],[s,[i,"Facebook"]],[/fxios\/([\w\.-]+)/i],[s,[i,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[s,[i,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[s,i],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[i,[s,g.str,w.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[i,s],[/(navigator|netscape)\/([\w\.-]+)/i],[[i,"Netscape"],s],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/([\w\.-]+)/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]+)*/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[i,s]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[[o,"amd64"]],[/(ia32(?=;))/i],[[o,v.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[[o,"ia32"]],[/windows\s(ce|mobile);\sppc;/i],[[o,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[o,/ower/,"",v.lowerize]],[/(sun4\w)[;\)]/i],[[o,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[[o,v.lowerize]]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[e,n,[t,d]],[/applecoremedia\/[\w\.]+ \((ipad)/],[e,[n,"Apple"],[t,d]],[/(apple\s{0,1}tv)/i],[[e,"Apple TV"],[n,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[n,e,[t,d]],[/(kf[A-z]+)\sbuild\/[\w\.]+.*silk\//i],[e,[n,"Amazon"],[t,d]],[/(sd|kf)[0349hijorstuw]+\sbuild\/[\w\.]+.*silk\//i],[[e,g.str,w.device.amazon.model],[n,"Amazon"],[t,c]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[e,n,[t,c]],[/\((ip[honed|\s\w*]+);/i],[e,[n,"Apple"],[t,c]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|huawei|meizu|motorola|polytron)[\s_-]?([\w-]+)*/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[n,e,[t,c]],[/\(bb10;\s(\w+)/i],[e,[n,"BlackBerry"],[t,c]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone)/i],[e,[n,"Asus"],[t,d]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[n,"Sony"],[e,"Xperia Tablet"],[t,d]],[/(?:sony)?(?:(?:(?:c|d)\d{4})|(?:so[-l].+))\sbuild\//i],[[n,"Sony"],[e,"Xperia Phone"],[t,c]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[n,e,[t,a]],[/android.+;\s(shield)\sbuild/i],[e,[n,"Nvidia"],[t,a]],[/(playstation\s[34portablevi]+)/i],[e,[n,"Sony"],[t,a]],[/(sprint\s(\w+))/i],[[n,g.str,w.device.sprint.vendor],[e,g.str,w.device.sprint.model],[t,c]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[n,e,[t,d]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w+)*/i,/(alcatel|geeksphone|huawei|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]+)*/i],[n,[e,/_/g," "],[t,c]],[/(nexus\s9)/i],[e,[n,"HTC"],[t,d]],[/(nexus\s6p)/i],[e,[n,"Huawei"],[t,c]],[/(microsoft);\s(lumia[\s\w]+)/i],[n,e,[t,c]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[e,[n,"Microsoft"],[t,a]],[/(kin\.[onetw]{3})/i],[[e,/\./g," "],[n,"Microsoft"],[t,c]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?(:?\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w+)*/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[e,[n,"Motorola"],[t,c]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[e,[n,"Motorola"],[t,d]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[n,v.trim],[e,v.trim],[t,u]],[/hbbtv.+maple;(\d+)/i],[[e,/^/,"SmartTV"],[n,"Samsung"],[t,u]],[/\(dtv[\);].+(aquos)/i],[e,[n,"Sharp"],[t,u]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[n,"Samsung"],e,[t,d]],[/smart-tv.+(samsung)/i],[n,[t,u],e],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i,/sec-((sgh\w+))/i],[[n,"Samsung"],e,[t,c]],[/sie-(\w+)*/i],[e,[n,"Siemens"],[t,c]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]+)*/i],[[n,"Nokia"],e,[t,c]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[e,[n,"Acer"],[t,d]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[n,"LG"],e,[t,d]],[/(lg) netcast\.tv/i],[n,e,[t,u]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w+)*/i],[e,[n,"LG"],[t,c]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[e,[n,"Lenovo"],[t,d]],[/linux;.+((jolla));/i],[n,e,[t,c]],[/((pebble))app\/[\d\.]+\s/i],[n,e,[t,h]],[/android.+;\s(glass)\s\d/i],[e,[n,"Google"],[t,h]],[/android.+(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus|note lte)?[\s_]*(?:\d\w)?)\s+build/i],[[e,/_/g," "],[n,"Xiaomi"],[t,c]],[/android.+a000(1)\s+build/i],[e,[n,"OnePlus"],[t,c]],[/\s(tablet)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[t,v.lowerize],n,e]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[s,[i,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[i,s],[/rv\:([\w\.]+).*(gecko)/i],[s,i]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[i,s],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s]+\w)*/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[i,[s,g.str,w.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[i,"Windows"],[s,g.str,w.os.windows.version]],[/\((bb)(10);/i],[[i,"BlackBerry"],s],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]+)*/i,/linux;.+(sailfish);/i],[i,s],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[[i,"Symbian"],s],[/\((series40);/i],[i],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[i,"Firefox OS"],s],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],[i,s],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[i,"Chromium OS"],s],[/(sunos)\s?([\w\.]+\d)*/i],[[i,"Solaris"],s],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],[i,s],[/(haiku)\s(\w+)/i],[i,s],[/(ip[honead]+)(?:.*os\s([\w]+)*\slike\smac|;\sopera)/i],[[i,"iOS"],[s,/_/g,"."]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i,/(macintosh|mac(?=_powerpc)\s)/i],[[i,"Mac OS"],[s,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]+)*/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]+)*/i],[i,s]]},b=function(e,i){if(!(this instanceof b))return new b(e,i).getResult();var t=e||(r&&r.navigator&&r.navigator.userAgent?r.navigator.userAgent:""),n=i?v.extend(y,i):y;return this.getBrowser=function(){var e=g.rgx.apply(this,n.browser);return e.major=v.major(e.version),e},this.getCPU=function(){return g.rgx.apply(this,n.cpu)},this.getDevice=function(){return g.rgx.apply(this,n.device)},this.getEngine=function(){return g.rgx.apply(this,n.engine)},this.getOS=function(){return g.rgx.apply(this,n.os)},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return t},this.setUA=function(e){return t=e,this},this};b.VERSION="0.7.12",b.BROWSER={NAME:i,MAJOR:"major",VERSION:s},b.CPU={ARCHITECTURE:o},b.DEVICE={MODEL:e,VENDOR:n,TYPE:t,CONSOLE:a,MOBILE:c,SMARTTV:u,TABLET:d,WEARABLE:h,EMBEDDED:"embedded"},b.ENGINE={NAME:i,VERSION:s},b.OS={NAME:i,VERSION:s},typeof S!==f?(typeof E!==f&&E.exports&&(S=E.exports=b),S.UAParser=b):r.UAParser=b;var k=r.jQuery||r.Zepto;if(typeof k!==f){var x=new b;k.ua=x.getResult(),k.ua.get=function(){return x.getUA()},k.ua.set=function(e){x.setUA(e);var i=x.getResult();for(var t in i)k.ua[t]=i[t]}}}("object"==typeof window?window:this)},{}],22:[function(e,s,i){(function(e){var i,t=e.crypto||e.msCrypto;if(t&&t.getRandomValues){var n=new Uint8Array(16);i=function(){return t.getRandomValues(n),n}}if(!i){var r=new Array(16);i=function(){for(var e,i=0;i<16;i++)0==(3&i)&&(e=4294967296*Math.random()),r[i]=e>>>((3&i)<<3)&255;return r}}s.exports=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],23:[function(e,i,t){for(var o=e("./rng"),r=[],s={},n=0;n<256;n++)r[n]=(n+256).toString(16).substr(1),s[r[n]]=n;function f(e,i){var t=i||0,n=r;return n[e[t++]]+n[e[t++]]+n[e[t++]]+n[e[t++]]+"-"+n[e[t++]]+n[e[t++]]+"-"+n[e[t++]]+n[e[t++]]+"-"+n[e[t++]]+n[e[t++]]+"-"+n[e[t++]]+n[e[t++]]+n[e[t++]]+n[e[t++]]+n[e[t++]]+n[e[t++]]}var a=o(),m=[1|a[0],a[1],a[2],a[3],a[4],a[5]],h=16383&(a[6]<<8|a[7]),v=0,g=0;function c(e,i,t){var n=i&&t||0;"string"==typeof e&&(i="binary"==e?new Array(16):null,e=null);var r=(e=e||{}).random||(e.rng||o)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,i)for(var s=0;s<16;s++)i[n+s]=r[s];return i||f(r)}var d=c;d.v1=function(e,i,t){var n=i&&t||0,r=i||[],s=void 0!==(e=e||{}).clockseq?e.clockseq:h,o=void 0!==e.msecs?e.msecs:(new Date).getTime(),a=void 0!==e.nsecs?e.nsecs:g+1,c=o-v+(a-g)/1e4;if(c<0&&void 0===e.clockseq&&(s=s+1&16383),(c<0||v<o)&&void 0===e.nsecs&&(a=0),1e4<=a)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");v=o,h=s;var d=(1e4*(268435455&(o+=122192928e5))+(g=a))%4294967296;r[n++]=d>>>24&255,r[n++]=d>>>16&255,r[n++]=d>>>8&255,r[n++]=255&d;var u=o/4294967296*1e4&268435455;r[n++]=u>>>8&255,r[n++]=255&u,r[n++]=u>>>24&15|16,r[n++]=u>>>16&255,r[n++]=s>>>8|128,r[n++]=255&s;for(var p=e.node||m,l=0;l<6;l++)r[n+l]=p[l];return i||f(r)},d.v4=c,d.parse=function(e,i,t){var n=i&&t||0,r=0;for(i=i||[],e.toLowerCase().replace(/[0-9a-f]{2}/g,function(e){r<16&&(i[n+r++]=s[e])});r<16;)i[n+r++]=0;return i},d.unparse=f,i.exports=d},{"./rng":22}],24:[function(e,i,t){function n(){}(i.exports=n).mixin=function(e){var i=e.prototype||e;i.isWildEmitter=!0,i.on=function(e,i,t){this.callbacks=this.callbacks||{};var n=3===arguments.length,r=n?i:void 0,s=n?t:i;return s._groupName=r,(this.callbacks[e]=this.callbacks[e]||[]).push(s),this},i.once=function(i,e,t){var n=this,r=3===arguments.length,s=r?e:void 0,o=r?t:e;return this.on(i,s,function e(){n.off(i,e),o.apply(this,arguments)}),this},i.releaseGroup=function(e){var i,t,n,r;for(i in this.callbacks=this.callbacks||{},this.callbacks)for(t=0,n=(r=this.callbacks[i]).length;t<n;t++)r[t]._groupName===e&&(r.splice(t,1),t--,n--);return this},i.off=function(e,i){this.callbacks=this.callbacks||{};var t,n=this.callbacks[e];return n&&(1===arguments.length?delete this.callbacks[e]:(t=n.indexOf(i),n.splice(t,1),0===n.length&&delete this.callbacks[e])),this},i.emit=function(e){this.callbacks=this.callbacks||{};var i,t,n,r=[].slice.call(arguments,1),s=this.callbacks[e],o=this.getWildcardCallbacks(e);if(s)for(i=0,t=(n=s.slice()).length;i<t&&n[i];++i)n[i].apply(this,r);if(o)for(t=o.length,i=0,t=(n=o.slice()).length;i<t&&n[i];++i)n[i].apply(this,[e].concat(r));return this},i.getWildcardCallbacks=function(e){this.callbacks=this.callbacks||{};var i,t,n=[];for(i in this.callbacks)t=i.split("*"),("*"===i||2===t.length&&e.slice(0,t[0].length)===t[0])&&(n=n.concat(this.callbacks[i]));return n}},n.mixin(n)},{}]},{},[2])(2)});