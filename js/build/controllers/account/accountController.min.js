define(["faceitConsApp"+window.__env.minUrl,window.__env.baseUrl+"shared/sharedController"+window.__env.minUrl,window.__env.baseUrl+"services/sharedMethod"+window.__env.minUrl,window.__env.baseUrl+"services/sharedService"+window.__env.minUrl,window.__env.baseUrl+"directives/onTouch"+window.__env.minUrl,window.__env.baseUrl+"directives/emailValidate"+window.__env.minUrl,window.__env.baseUrl+"directives/companyValidate"+window.__env.minUrl,window.__env.baseUrl+"directives/cinValidate"+window.__env.minUrl,window.__env.baseUrl+"directives/onlyDigits"+window.__env.minUrl,window.__env.baseUrl+"directives/urlValidate"+window.__env.minUrl,window.__env.baseUrl+"directives/googlePlace"+window.__env.minUrl,window.__env.baseUrl+"controllers/popups/otpController"+window.__env.minUrl],function(o){"use strict";o.controller("accountController",["$scope","$rootScope","$routeParams","$location","sharedService","sharedMethod","$sce","user",function(e,t,o,n,a,i,r,s){e.CompanyInfo={};var l="";function d(o,n){i.Hide("submissionError"),i.Hide("submissionSuccess"),-1===o&&(t.safeApply(function(){n?i.SetText("submissionError",n):i.SetText("submissionError","Please fill mandatory fields")}),i.Show("submissionError")),1===o&&i.Show("submissionSuccess")}function c(){i.start(),a.SetCompanyDetails(e.CompanyInfo,function(o){if(i.stop(),200===o.data.status){o.data.Results;d(1)}else d(-1,"System fail to process.Please try again.")},function(o){d(-1,"System fail to process.Please try again."),i.stop()})}e.LoadDefaults=function(){i.start(),a.GetCompanyInfo(31,function(o){200===o.status&&(e.CompanyInfo=o.data.Results),i.stop()},function(o){i.stop()})},e.LoadDefaultsDetails=function(){i.start(),a.GetShortCompany(31,function(o){200===o.status&&(e.ShortCompanyInfo=o.data.Results),i.stop()},function(o){i.stop()}),a.GetCompanyDetails(31,function(o){200===o.status&&(e.CompanyInfo=o.data.Results,l=e.CompanyInfo.Contact.MobileNumber),i.stop()},function(o){i.stop()})},e.UpdateZipCode=function(o){t.safeApply(function(){e.CompanyInfo.Company.AreaCode=o,e.CompanyInfo.Contact.AreaCode=o})},e.SubmitUpdate=function(){d(0),angular.forEach(e.frmCorporate.$error,function(o){angular.isArray(o)&&angular.forEach(o,function(o){if(o){var n=document.getElementById(o.$name);n||(n=document.getElementsByName(o.$name)[0]);var e=o.$name+"Label",t=document.getElementById(e);t||(t=document.getElementsByName(e)[0]),t&&(n.disabled?t.className="labelheading":t.className="labelheading_error")}})}),e.frmCorporate.$valid?l!==e.CompanyInfo.Contact.MobileNumber?(i.start(),t.$broadcast("OnOtpFormClicked",{Name:e.CompanyInfo.Contact.Name,Mobile:e.CompanyInfo.Contact.AreaCode+""+e.CompanyInfo.Contact.MobileNumber,Email:e.CompanyInfo.Contact.Email})):c():d(-1)},t.$on("WaitForOTP",function(o,n){"Success"===n.State&&c()}),e.ChangePhoto=function(o){t.$broadcast("OpenPhotoForEdit",{Company:!0,Photo:o})},t.$on("CorporatePhotoUpdated",function(o,n){t.safeApply(function(){var o=n.Photo+"?v="+i.GetRandomNumber(1,100);e.CompanyInfo&&(e.CompanyInfo.Photo=o),e.ShortCompanyInfo&&(e.ShortCompanyInfo.Photo=o),$("#img_comp_photo").attr("src",o)})})}])});