define(["faceitConsApp"+window.__env.minUrl,window.__env.baseUrl+"shared/sharedController"+window.__env.minUrl,window.__env.baseUrl+"services/sharedMethod"+window.__env.minUrl,window.__env.baseUrl+"services/sharedService"+window.__env.minUrl,window.__env.baseUrl+"directives/onTouch"+window.__env.minUrl,window.__env.baseUrl+"directives/googlePlace"+window.__env.minUrl,window.__env.baseUrl+"directives/range"+window.__env.minUrl,window.__env.baseUrl+"controllers/popups/otpController"+window.__env.minUrl],function(e){"use strict";e.controller("profileController",["$scope","$rootScope","$routeParams","$location","sharedService","sharedMethod","$sce","user",function(n,t,e,r,a,i,o,l){var s="";function c(e,r,o,n){i.Hide(e),-1===o&&(t.safeApply(function(){n?i.SetText(r,n):i.SetText(r,"Please fill mandatory fields")}),i.Show(e)),1===o&&(i.SetText(r,n),i.Show(e))}function u(r,o){i.start(),a.SetProfileContact(n.Contact,function(e){i.stop(),200===e.status?(n.Contact=e.data.Results,s=n.Contact.MobileNumber,i.IsNull(n.Contact.WorkingOn)||(n.workYear=new Date(n.Contact.WorkingOn).getFullYear(),n.workMonth=new Date(n.Contact.WorkingOn).getMonth()+1),c(r,o,1,"Updated Successfull")):c(r,o,-1,"System fail to process.Please try again.")},function(e){c(r,o,-1,"System fail to process.Please try again."),i.stop()})}n.Contact={},n.workYear=0,n.workMonth=0,n.OnLoadDefaults=function(){i.start(),a.GetProfileContact(function(e){200===e.status&&(n.Contact=e.data.Results,i.IsNull(n.Contact.WorkingOn)||(n.workYear=new Date(n.Contact.WorkingOn).getFullYear(),n.workMonth=new Date(n.Contact.WorkingOn).getMonth()+1),s=n.Contact.MobileNumber),i.stop()},function(e){i.stop()})},n.UpdateZipCode=function(e){n.Contact.AreaCode=e},n.ProfileSubmit=function(){c("submiError1","submiError1Msg",0),angular.forEach(n.frmProfile.$error,function(e){angular.isArray(e)&&angular.forEach(e,function(e){if(e){var r=document.getElementById(e.$name);r||(r=document.getElementsByName(e.$name)[0]);var o=e.$name+"Label",n=document.getElementById(o);n||(n=document.getElementsByName(o)[0]),n&&(r.disabled?n.className="labelheading":n.className="labelheading_error")}})}),n.frmProfile.$valid?s!==n.Contact.MobileNumber?(i.start(),t.$broadcast("OnOtpFormClicked",{Name:n.Contact.Name,Mobile:n.Contact.AreaCode+""+n.Contact.MobileNumber,Email:n.Contact.Email})):u("submiError1","submiError1Msg"):c("submiError1","submiError1Msg",-1)},t.$on("WaitForOTP",function(e,r){"Success"===r.State&&u("submiError1","submiError1Msg")}),n.workMonth=0,n.workYear=0;var m=["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];n.highlightWork=function(e){var r=document.getElementById("proworkLabel");r&&(r.className=e?"labelheading_error":"labelheading")},n.PersonalSubmit=function(){n.highlightWork(!1),c("submiError2","submiError2Msg",0),angular.forEach(n.frmPersonal.$error,function(e){angular.isArray(e)&&angular.forEach(e,function(e){if(e){var r=document.getElementById(e.$name);r||(r=document.getElementsByName(e.$name)[0]);var o=e.$name+"Label",n=document.getElementById(o);n||(n=document.getElementsByName(o)[0]),n&&(r.disabled?n.className="labelheading":n.className="labelheading_error")}})}),n.frmPersonal.$valid?i.IsNull(n.workMonth)||0===n.workMonth||i.IsNull(n.workYear)||0===n.workYear?(n.highlightWork(!0),c("submiError2","submiError2Msg",-1)):(n.Contact.WorkingOn=n.workYear+"-"+m[n.workMonth]+"-01",u("submiError2","submiError2Msg")):((i.IsNull(n.workMonth)||0===n.workMonth||i.IsNull(n.workYear)||0===n.workYear)&&n.highlightWork(!0),c("submiError2","submiError2Msg",-1))}}])});