define(["faceitConsApp"+window.__env.minUrl,window.__env.baseUrl+"shared/sharedController"+window.__env.minUrl,window.__env.baseUrl+"controllers/popups/popupController"+window.__env.minUrl,window.__env.baseUrl+"services/sharedMethod"+window.__env.minUrl,window.__env.baseUrl+"services/sharedService"+window.__env.minUrl],function(o){"use strict";o.controller("dashboardController",["$scope","$rootScope","$routeParams","$location","sharedService","sharedMethod","$sce","user",function(e,n,o,t,s,i,a,r){e.AccountPhoto=r.Get("Photo"),e.SessionsCount={Completed:0,Cancelled:0,Scheduled:0},e.AllSessions=[],e.Sessions=[],e.UpComingSessions=[],e.ShortContact={Name:"",Email:"",Designation:"",Department:"",Photo:"",AreaCode:"",MobileNumber:"",Phone:""},e.LoadDefaults=function(){e.Sessions=[],e.UpComingSessions=[],e.SessionsCount={Completed:0,Cancelled:0,Scheduled:0},e.LoadDashboardItems()},e.LoadDashboardItems=function(){setTimeout(function(){i.start(),s.GetSessionsCount(function(o){200==parseInt(o.status)&&(e.SessionsCount=o.data.Results),i.stop()},function(o){i.stop()})},100),setTimeout(function(){i.start(),s.GetContactInfo(function(o){200==parseInt(o.status)&&(e.ShortContact=o.data.Results,e.ShortContact.Phone=i.TrimString(i.NullToEmpty(e.ShortContact.AreaCode)+" "+i.NullToEmpty(e.ShortContact.MobileNumber))),i.stop()},function(o){i.stop()})},100),setTimeout(function(){i.start(),s.GetAllsessions(function(o){if(200==parseInt(o.status)){var t=o.data.Results;e.AllSessions=t,e.UpComingSessions=i.GetMultipleMatchedItems(t,"Status",";Confirmed;Started;"),e.Sessions=i.GetMultipleMatchedItems(t,"Status",";Completed;Cancelled;Expired;")}i.stop()},function(o){i.stop()})},100)},e.RefreshSessions=function(){i.start(),s.GetSessionsCount(function(o){i.stop(),200==parseInt(o.status)&&e.LoadDefaults()},function(o){i.stop()})},e.ShowContact=function(o){var t=i.GetItem(e.AllSessions,"SessionId",o);n.$broadcast("ShowContact",{Selected:t})},e.HideContact=function(){n.$broadcast("HideContact",null)},e.ShowNewScheduledSession=function(){n.$broadcast("NewSession",null)},e.$on("RefreshDSession",function(o,t){e.RefreshSessions()}),e.ShowCancelSession=function(o){n.$broadcast("ShowCancelSession",{KeyId:o})},e.ShowCancelledSession=function(o){n.$broadcast("ShowCancelledSession",{KeyId:o})},e.LoadForPhotoEdit=function(){n.$broadcast("OpenPhotoForEdit",{Contact:!0,Photo:r.Get("Photo")})}}])});