define(["faceitConsApp"+window.__env.minUrl,window.__env.baseUrl+"shared/sharedController"+window.__env.minUrl,window.__env.baseUrl+"services/sharedMethod"+window.__env.minUrl,window.__env.baseUrl+"services/sharedService"+window.__env.minUrl,window.__env.baseUrl+"directives/ngEnter"+window.__env.minUrl,window.__env.baseUrl+"directives/ngHide"+window.__env.minUrl,window.__env.baseUrl+"directives/onTouch"+window.__env.minUrl,window.__env.baseUrl+"directives/emailValidate"+window.__env.minUrl,window.__env.baseUrl+"directives/companyValidate"+window.__env.minUrl,window.__env.baseUrl+"directives/cinValidate"+window.__env.minUrl,window.__env.baseUrl+"directives/onlyDigits"+window.__env.minUrl,window.__env.baseUrl+"directives/urlValidate"+window.__env.minUrl,window.__env.baseUrl+"directives/googlePlace"+window.__env.minUrl,window.__env.baseUrl+"controllers/popups/otpController"+window.__env.minUrl,window.__env.baseUrl+"controllers/common/tabController"+window.__env.minUrl],function(e){"use strict";e.controller("homeController",["$scope","$rootScope","$routeParams","$location","sharedService","sharedMethod","$sce","storageFactory","user",function(a,i,e,n,t,o,r,s,l){function d(){o.SetValue("loginPassword",""),o.SetValue("loginEmail",""),o.SetValue("forgotEmail",""),u(""),m("",!1)}function u(e){o.Hide("btnResendEmail"),o.SetText("errorLogin",""),o.Hide("errorLogin"),o.IsNull(e)||(o.SetText("errorLogin",e),o.Show("errorLogin"))}function m(e,n){o.SetText("statusForgotLogin",""),o.Hide("statusForgotLogin"),o.IsNull(e)||(n?o.ChangeClass("statusForgotLogin","si_success"):o.ChangeClass("statusForgotLogin","si_error"),o.SetText("statusForgotLogin",e),o.Show("statusForgotLogin"))}a.form={},i.$on("BadRequest",function(e,n){200!==n.status&&(o.stop(),u(n.msg))}),a.ReSendEmail=function(){u("");var e=o.GetValue("loginEmail");if(!o.IsNull(e)&&o.IsValidEmail(e)){o.start();var n={Email:e};t.ReSendConfirmationEmail(n,function(e){o.stop(),u("Please check your email.")},function(e){o.stop(),console.log(e)})}else u("Invalid e-mail address")},a.SubmitLogin=function(){u("");var e=o.GetValue("loginPassword"),n=o.GetValue("loginEmail");if(o.IsNull(e)||o.IsNull(n))u("Invalid Credentials. Please retry");else if(o.IsValidEmail(n)){o.start();var a={Email:n,Password:e};t.LoginToServer(o.EncodeDetails(a),c,g)}else u("Invalid e-mail address")};var c=function(e){if(200===parseInt(e.status)&&200===parseInt(e.data.status))s.setValue("Identity",e.data),t.GetLoggedInUser(function(e){o.stop(),200===parseInt(e.status)&&200===parseInt(e.data.status)?(l.setModal(e.data.Results),i.NavigateToRoute("db")):(o.SetText("errorLogin",e.data.statusText),o.Show("errorLogin"))},function(e){console.log(e),o.stop()});else{var n=e.data.statusText;-1<n.indexOf("confirm your email")&&o.Show("btnResendEmail"),o.SetText("errorLogin",n),o.Show("errorLogin"),o.stop()}},g=function(e){o.stop(),console.log(e)};function w(e,n){o.Hide("submissionError"),o.Hide("submissionSuccess"),-1===e&&(i.safeApply(function(){n?o.SetText("submissionError",n):o.SetText("submissionError","Please fill mandatory fields")}),o.Show("submissionError")),1===e&&(o.Show("submissionSuccess"),o.SetDisabled("btnSubmitRegister",!0),o.SetDisabled("ebcaptchainput",!0))}a.SubmitForgotPassword=function(){m("",!1);var e=o.GetValue("forgotEmail");!o.IsNull(e)&&o.IsValidEmail(e)?(o.start(),t.ForgotPassword(e,function(e){(o.stop(),"Success"===e.data.Results)?m("Password sent your registered e-mail.",!0):m(o.ResultCodeStatus(parseInt(e.data.Results)),!1)},function(e){m("System fail to process.Please try again.",!1),o.stop()})):m("Invalid Email ID. Please retry",!1)},a.ShowForgotPassword=function(){d(),o.Hide("logindetails"),o.Show("fgt-pswd")},a.HideForgotPassword=function(){d(),o.Show("logindetails"),o.Hide("fgt-pswd")},a.UpdateZipCode=function(e){i.safeApply(function(){a.NewSignUp.Company.AreaCode=e,a.NewSignUp.Contact.AreaCode=e})},a.NewSignUp={Login:{Email:"",Password:""},Company:{Name:"",CIN:"",Website:"",Address:"",City:"",State:"",Country:"",ZipCode:"",AreaCode:"",LandLine:""},Contact:{Name:"",Email:"",Gender:"",AreaCode:"",MobileNumber:"",LandLine:"",Extension:""}},a.SignUpSubmit=function(){w(0),a.NewSignUp.Contact.Email=a.NewSignUp.Login.Email,angular.forEach(a.frmCorporate.$error,function(e){angular.isArray(e)&&angular.forEach(e,function(e){if(e){var n=document.getElementById(e.$name);n||(n=document.getElementsByName(e.$name)[0]);var a=e.$name+"Label",i=document.getElementById(a);i||(i=document.getElementsByName(a)[0]),i&&(n.disabled?i.className="labelheading":i.className="labelheading_error")}})}),a.frmCorporate.$valid?(o.start(),i.$broadcast("OnOtpFormClicked",{Name:a.NewSignUp.Contact.Name,Mobile:a.NewSignUp.Contact.AreaCode+""+a.NewSignUp.Contact.MobileNumber,Email:a.NewSignUp.Contact.Email})):w(-1)},i.$on("WaitForOTP",function(e,n){"Success"===n.State&&(o.start(),t.RegisterCompany(a.NewSignUp,function(e){o.stop(),200===parseInt(e.data.status)?w(1):w(-1,"System fail to process.Please try again.")},function(e){w(-1,"System fail to process.Please try again."),o.stop()}))}),a.Enquiry={Name:"",Email:"",Number:""},a.SubmitEnquiry=function(){if(a.Message="",a.CSSStyle="success",o.Hide("enqMsgId"),a.form.frmenquiry.$valid){a.Enquiry.Name=o.getModalValue(a,"frmenquiry","enqfname"),a.Enquiry.Email=o.getModalValue(a,"frmenquiry","enqemail"),a.Enquiry.Number=o.getModalValue(a,"frmenquiry","enqcontactnumber");var e={Name:a.Enquiry.Name,Email:a.Enquiry.Email,Number:a.Enquiry.Number};a.Message="Please wait...",o.Show("enqMsgId"),t.ContactToTeam(e,a.EnquirSent,a.EnquirSentFail)}else a.HighLightEnqueryFields(),a.CSSStyle="error",a.Message="Clear error fields and update",o.Show("enqMsgId")},a.EnquirSent=function(e){a.Enquiry.Name="",a.Enquiry.Email="",a.Enquiry.Number="",a.Message="Mail has sent to HireGate Team",o.Show("enqMsgId")},a.EnquirSentFail=function(e){a.Message="Unable to send a mail. Try again.",o.Show("enqMsgId")},a.HighLightEnqueryFields=function(){angular.forEach(a.form.frmenquiry.$error,function(e){angular.isArray(e)&&angular.forEach(e,function(e){if(e){var n=document.getElementById(e.$name);n||(n=document.getElementsByName(e.$name)[0]);var a=e.$name+"Label",i=document.getElementById(a);i||(i=document.getElementsByName(a)[0]),i&&(n.disabled?i.className="request_labelheading":i.className="request_labelheading_error")}})})}}])});