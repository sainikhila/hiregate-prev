define(["faceitConsApp"+window.__env.minUrl,window.__env.baseUrl+"services/sharedMethod"+window.__env.minUrl,window.__env.baseUrl+"directives/onlyDigits"+window.__env.minUrl,window.__env.baseUrl+"services/sharedService"+window.__env.minUrl],function(e){"use strict";e.controller("otpController",["$scope","$rootScope","sharedService","sharedMethod",function(o,t,n,r){var i="",s="",l="";function a(e){r.SetText("otp_error",""),r.Hide("otp_error"),r.IsNull(e)||(r.SetText("otp_error",e),r.Show("otp_error"),p(!1))}function p(e){r.SetDisabled("btnOptClose",e),r.SetDisabled("otpText",e),r.SetDisabled("btnSubmitOtp",e),r.SetDisabled("btnResendOtp",e)}o.OtpNumber="",t.$on("OnOtpFormClicked",function(e,t){l=s=i="",!1,0,a(o.OtpNumber=""),p(!1),r.Hide("btnResendOtp"),s=t.Name,i=t.Mobile,l=t.Email,setTimeout(function(){!function(){0,!1,o.OtpNumber="";var e={Name:s,Email:l,MobileNumber:i};n.SendOTPCode(e,function(e){if(200===e.status){e.data.Results;o.OtpSent=!0,r.TriggerDialog("otp_show",!1),r.stop()}},function(e){r.TriggerDialog("otp_show",!1),a("System fail to process.Please try again."),r.stop()})}()},100)}),o.SubmitOtp=function(){if(p(!0),a(""),o.OtpNumberErrorType=0,r.IsNull(o.OtpNumber))a("Otp Number should not be blank");else{if(6!==o.OtpNumber.length)return a("Otp Number should be 6 Chars length"),void r.ShowInline("btnResendOtp");r.start(),n.ConfirmOTPCode(o.OtpNumber,function(e){200===e.status&&("Success"==e.data.Results?(t.$broadcast("WaitForOTP",{State:"Success"}),r.TriggerDialog("pop_closeBtn",!1)):(a("Invalid Otp Number"),r.ShowInline("btnResendOtp")),r.stop())},function(e){a("System fail to process.Please try again."),r.ShowInline("btnResendOtp"),r.stop()})}},o.OtpFormClosed=function(){t.$broadcast("WaitForOTP",{State:"Failure"}),r.TriggerDialog("pop_closeBtn",!1)}}])});