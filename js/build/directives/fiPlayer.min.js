var app=angular.module("FIPlayer",[]);app.directive("fiPlayer",["$rootScope","$routeParams","ngVideoTok","sharedMethod",function(b,e,g,f){return{restrict:"E",scope:{userObject:"="},template:'<videolayout  id="recordingcontainerpanel"><div class="webcamera_control"><video id="videoInput" autoplay style="width:100%;height:100%" poster="/content/img/webrtc_small.gif"></video></div></videolayout><button_video_label><input type="button" ng-click="doPlayerPlay()" id="btnPlayerPlay" class="button_video" value="Play" /><input type="button" ng-click="doPlayerStop()" style="display:none;" id="btnPlayerStop" class="button_video" value="Stop" /><span id="playerStatus"></span></button_video_label>',link:function(n,e,t){f.Show("btnPlayerPlay"),f.Hide("btnPlayerStop");var a,o,r=window.__env.mediaUrl;o={url:r,LoginId:n.userObject.Id,LoginName:n.userObject.Name,ConferenceCall:!1,localVideo:document.getElementById("videoInput")},a=n.userObject.VideoUrl,n.doPlayerPlay=function(){f.Hide("btnPlayerPlay"),f.Hide("btnPlayerStop"),function(){function t(e){b.safeApply(function(){n.addStatus(e.Reason)})}g.on("connection",function(e){switch(t(e),e.Status){case i:g.register(!1);break;case l:case c:case d:n.stopcontainer(),f.Show("btnPlayerPlay");break;case s:g.setFileName(a),g.playrecord(!1)}}),g.on("playing",function(e){switch(t(e),e.Status){case p:b.safeApply(function(){f.Hide("btnPlayerPlay"),f.Show("btnPlayerStop")}),n.stopcontainer();break;case y:b.safeApply(function(){f.Show("btnPlayerPlay"),f.Hide("btnPlayerStop")}),n.stopcontainer();break;case u:case v:b.safeApply(function(){f.Show("btnPlayerPlay"),f.Hide("btnPlayerStop")}),n.stopcontainer()}}),g.on("onstatus",function(e){t(e)}),n.addStatus=function(e){b.safeApply(function(){f.SetText("playerStatus",e)})},n.removeStatus=function(){f.Hide("videoError")},n.startcontainer=function(){},n.startcontainer2=function(){f.Hide("videoInput");var e=f.getElement("recordingcontainerpanel");if(e){var t=0,n=e.css("zIndex");isNaN(n)||(t=parseInt(n)+1);var a=f.getPosition(e[0]),o=document.createElement("div");o.id="recordingcontainerpanel_progressbar",$(o).addClass("tc_bg_panel"),$(o).append("<div class='loaderContainer' style='display:block;'> <div class='loaderBlock'>"+'<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 133 152" style="enable-background:new 0 0 133 152" xml:space="preserve"><path class="loaderFI_transparent_outline" d="M106.682,120.633 c2.087,7.738,6.6,15.273,11.069,21.835l-0.607-0.09c-10.761-1.979-20.194-6.567-28.343-11.782h-0.044 \tc-19.054-1.189-32.76-2.213-50.034-3.963l-0.061-0.007c-11.374-1.23-20.468-9.004-22.295-19.231L5.579,60.465 C5.238,58.767,5.066,57,5.066,55.188C4.24,45.005,11.234,35.083,21.643,30.716L80.365,6.881C84.04,5.537,87.664,5,90.694,5 \tc0.807,0,1.435,0.002,2.203,0.084h0.148c12.462,0,22.563,10.211,22.563,22.676v74.26c0,7.083-3.274,13.683-8.376,18.093 L106.682,120.633z" /> <path class="loaderFI_transparent_outline1" fill="transparent" d="M106.682,120.633 c2.087,7.738,6.6,15.273,11.069,21.835l-0.607-0.09c-10.761-1.979-20.194-6.567-28.343-11.782h-0.044 \tc-19.054-1.189-32.76-2.213-50.034-3.963l-0.061-0.007c-11.374-1.23-20.468-9.004-22.295-19.231L5.579,60.465 C5.238,58.767,5.066,57,5.066,55.188C4.24,45.005,11.234,35.083,21.643,30.716L80.365,6.881C84.04,5.537,87.664,5,90.694,5 \tc0.807,0,1.435,0.002,2.203,0.084h0.148c12.462,0,22.563,10.211,22.563,22.676v74.26c0,7.083-3.274,13.683-8.376,18.093 L106.682,120.633z" /> <polygon fill="#279599" points="98.03,40.387 47.716,40.387 47.716,111.115 64.92,111.115 64.92,83.449 91.087,83.449 91.087,70.232 64.92,70.232 64.92,54.378 98.03,54.378 "/></svg></div></div>'),$(o).css("left",a.x),$(o).css("top",a.y),$(o).width(e.width()),$(o).height(e.height()),0<t&&$(o).css("zIndex",t),e.append(o)}},n.stopcontainer=function(){},n.stopcontainer2=function(){f.stopcontainer("recordingcontainerpanel");for(var e=f.getElement("recordingcontainerpanel_progressbar");e;)f.removeElement("recordingcontainerpanel_progressbar"),e=f.getElement("recordingcontainerpanel_progressbar");f.Show("videoInput")}}(),n.startcontainer(),g.validate(o)?g.connect():(n.stopcontainer(),n.addStatus("Error establishing connection."),f.Show("btnPlayerPlay"))},n.doPlayerStop=function(){n.startcontainer(),g.playrecord(!0)};var i=1,l=2,c=3,s=4,d=5,p=1,u=2,y=3,v=4}}}]);